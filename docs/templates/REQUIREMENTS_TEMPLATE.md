# 要件定義書: [機能名]

**作成日**: YYYY-MM-DD
**担当者**: [名前]
**ステータス**: 要件定義中 / 承認待ち / 承認済み / 実装中 / 完了
**リビジョン**: 1.0
**関連ドキュメント**: [関連する設計書やissueのリンク]

---

## 1. 概要

### 1.1 背景・目的
[この機能が必要な理由と目的を記載]

**背景**:
- [なぜこの機能が必要なのか]
- [解決したい課題]

**目的**:
- [この機能で達成したいこと]
- [期待される効果]

### 1.2 スコープ

**対象範囲** (含む):
- [機能A]
- [機能B]
- [機能C]

**対象外** (含まない):
- [機能X]
- [機能Y]

### 1.3 用語定義

| 用語 | 定義 |
|------|------|
| [用語1] | [説明] |
| [用語2] | [説明] |

---

## 2. 機能要件

### 2.1 機能一覧

| ID | 機能名 | 優先度 | 説明 |
|----|--------|--------|------|
| F001 | [機能1] | 高/中/低 | [簡単な説明] |
| F002 | [機能2] | 高/中/低 | [簡単な説明] |
| F003 | [機能3] | 高/中/低 | [簡単な説明] |

### 2.2 詳細仕様

#### F001: [機能名]

**説明**:
[機能の詳細説明]

**ユースケース**:
1. ユーザーは[操作1]を行う
2. システムは[処理1]を実行する
3. ユーザーに[結果1]を表示する

**入力**:
- `param1` (string, 必須): [説明]
- `param2` (number, 任意): [説明]

**出力**:
- `result1` (object): [説明]
  - `field1` (string): [説明]
  - `field2` (number): [説明]

**バリデーション**:
| 項目 | ルール | エラーメッセージ |
|------|--------|------------------|
| param1 | 必須、1-100文字 | "param1は1-100文字で入力してください" |
| param2 | 0以上の数値 | "param2は0以上の数値を入力してください" |

**エラーハンドリング**:
| エラーケース | 動作 |
|-------------|------|
| 入力が無効 | バリデーションエラーを表示 |
| API エラー | エラートーストを表示し、リトライボタンを提供 |
| ネットワークエラー | "通信エラーが発生しました"を表示 |

**画面遷移**:
```
[現在の画面] → [操作] → [遷移先の画面]
```

---

## 3. 非機能要件

### 3.1 パフォーマンス

| 項目 | 目標値 | 測定方法 |
|------|--------|----------|
| 初回レンダリング | 2秒以内 | Lighthouse Performance |
| API レスポンス | 500ms以内 | Network タブ |
| インタラクション応答 | 100ms以内 | Core Web Vitals |

### 3.2 アクセシビリティ

**WCAG 準拠レベル**: AA / AAA

**対応項目**:
- [ ] キーボード操作のみで全機能が利用可能
- [ ] スクリーンリーダー対応 (ARIA属性適用)
- [ ] カラーコントラスト比 4.5:1以上
- [ ] フォーカスインジケーター表示
- [ ] 代替テキスト (alt属性) 提供

**アクセシビリティスコア目標**:
- Atoms: 90点以上
- Molecules: 85点以上
- Organisms: 80点以上

### 3.3 セキュリティ

**認証・認可**:
- 認証: [必要 / 不要]
- 認可: [必要 / 不要]
- 権限レベル: [管理者 / ユーザー / ゲスト]

**データ保護**:
- [ ] 入力値のサニタイゼーション
- [ ] XSS対策
- [ ] CSRF対策
- [ ] SQLインジェクション対策

**個人情報の取り扱い**:
- 取得する個人情報: [リスト]
- 保存場所: [DB / localStorage / Cookie]
- 暗号化: [必要 / 不要]

### 3.4 ブラウザ・デバイス対応

**対応ブラウザ**:
- Chrome: 最新版
- Firefox: 最新版
- Safari: 最新版
- Edge: 最新版

**対応デバイス**:
- [ ] Desktop (1920x1080以上)
- [ ] Tablet (768x1024)
- [ ] Mobile (375x667以上)

**レスポンシブ対応**:
- ブレークポイント: 640px (sm), 768px (md), 1024px (lg), 1280px (xl)

---

## 4. UI/UX要件

### 4.1 画面設計

**ワイヤーフレーム**:
[Figma/Sketch/画像のリンク]

**画面構成**:
```
+----------------------------------+
|           Header                 |
+----------------------------------+
|  Breadcrumb                      |
+----------------------------------+
|                                  |
|  [メインコンテンツエリア]          |
|                                  |
+----------------------------------+
|           Footer                 |
+----------------------------------+
```

### 4.2 インタラクション

**ユーザー操作フロー**:
1. ユーザーが[ボタン]をクリック
2. [ローディング表示]
3. [結果表示]
4. [成功メッセージ表示]

**フィードバック**:
| 操作 | フィードバック方法 |
|------|-------------------|
| ボタンクリック | ローディングスピナー表示 |
| 成功 | 緑色のトーストメッセージ |
| エラー | 赤色のトーストメッセージ |
| 警告 | 黄色のアラートボックス |

**アニメーション**:
- フェードイン: 300ms
- スライド: 200ms
- ホバーエフェクト: 150ms

### 4.3 デザイントークン

**使用する色**:
- Primary: `#3B82F6`
- Secondary: `#10B981`
- Danger: `#EF4444`
- Text: `#1F2937`

**フォント**:
- 見出し: `text-2xl font-bold`
- 本文: `text-base`
- キャプション: `text-sm text-gray-600`

---

## 5. 技術要件

### 5.1 使用技術

**フロントエンド**:
- React: 19.0.0
- Next.js: 15.x
- TypeScript: 5.x
- Tailwind CSS: 4.0

**ライブラリ**:
- [ライブラリ名]: [バージョン] - [用途]
- [ライブラリ名]: [バージョン] - [用途]

**API**:
- エンドポイント: `POST /api/[endpoint]`
- 認証方式: [JWT / Session / OAuth]

### 5.2 アトミックデザイン分類

**階層**: Atoms / Molecules / Organisms / Templates / Pages

**依存コンポーネント**:
- Atoms:
  - Button (`@/components/ui/Button`)
  - Input (`@/components/ui/Input`)
- Molecules:
  - Breadcrumb (`@/components/common/Breadcrumb`)

**新規作成コンポーネント**:
- [コンポーネント名] (Atoms/Molecules/Organisms)
  - ファイル: `src/components/[path]/[ComponentName].tsx`
  - Props: [Props一覧]

### 5.3 状態管理

**グローバル状態** (Zustand):
- Store: `useCartStore`
- State: `items`, `total`
- Actions: `addItem`, `removeItem`

**ローカル状態** (useState):
- `isOpen`: モーダル開閉状態
- `selectedItem`: 選択中の商品

**URL State** (useSearchParams):
- `page`: ページ番号
- `sort`: ソート順

### 5.4 データ構造

```typescript
interface [DataType] {
  id: string;
  name: string;
  // ...その他のフィールド
}
```

---

## 6. 受け入れ基準

### 6.1 機能的受け入れ基準

**必須項目**:
- [ ] F001: [機能1]が正常に動作する
- [ ] F002: [機能2]が正常に動作する
- [ ] F003: [機能3]が正常に動作する
- [ ] エラーハンドリングが適切に動作する
- [ ] バリデーションが正しく機能する

**任意項目**:
- [ ] [オプション機能1]
- [ ] [オプション機能2]

### 6.2 非機能的受け入れ基準

**パフォーマンス**:
- [ ] Lighthouse Performance スコア 90以上
- [ ] 初回レンダリング 2秒以内
- [ ] API レスポンス 500ms以内

**アクセシビリティ**:
- [ ] Lighthouse Accessibility スコア [目標値]以上
- [ ] キーボード操作で全機能が利用可能
- [ ] スクリーンリーダーで内容が理解可能

**レスポンシブ**:
- [ ] Desktop表示が正常
- [ ] Tablet表示が正常
- [ ] Mobile表示が正常

### 6.3 品質基準

**コード品質**:
- [ ] TypeScriptエラー 0件
- [ ] ESLint警告 0件 (または正当な理由で除外)
- [ ] コードレビュー承認済み

**テスト**:
- [ ] Storybook Story作成済み
- [ ] ユニットテスト作成済み (該当する場合)
- [ ] E2Eテスト作成済み (該当する場合)

**ドキュメント**:
- [ ] コンポーネントドキュメント作成済み
- [ ] README更新済み
- [ ] Storybook MDX作成済み (該当する場合)

---

## 7. 制約事項

### 7.1 技術的制約

**環境**:
- Node.js: 20以上
- ブラウザ: モダンブラウザのみサポート (IE非対応)

**制限事項**:
- [制限1]
- [制限2]

### 7.2 スケジュール制約

| マイルストーン | 予定日 | 備考 |
|--------------|--------|------|
| 要件定義完了 | YYYY-MM-DD | |
| 設計完了 | YYYY-MM-DD | |
| 実装開始 | YYYY-MM-DD | |
| 実装完了 | YYYY-MM-DD | |
| テスト完了 | YYYY-MM-DD | |
| リリース | YYYY-MM-DD | |

**クリティカルパス**:
- [依存するタスク1]
- [依存するタスク2]

### 7.3 リソース制約

**人的リソース**:
- 開発者: [人数]
- デザイナー: [人数]
- レビュアー: [人数]

**予算制約**:
- [該当する場合記載]

---

## 8. リスクと対応策

| ID | リスク | 影響度 | 発生確率 | 対応策 | 担当者 |
|----|--------|--------|----------|--------|--------|
| R001 | [リスク1] | 高/中/低 | 高/中/低 | [対応内容] | [名前] |
| R002 | [リスク2] | 高/中/低 | 高/中/低 | [対応内容] | [名前] |

**具体例**:
| ID | リスク | 影響度 | 発生確率 | 対応策 | 担当者 |
|----|--------|--------|----------|--------|--------|
| R001 | APIレスポンスが遅い | 高 | 中 | キャッシュ戦略を導入 | 山田 |
| R002 | 外部ライブラリの脆弱性 | 中 | 低 | 定期的な脆弱性スキャン実施 | 佐藤 |

---

## 9. 変更履歴

| 日付 | バージョン | 変更内容 | 変更理由 | 担当者 | 承認者 |
|------|-----------|----------|----------|--------|--------|
| YYYY-MM-DD | 1.0 | 初版作成 | - | [名前] | [名前] |

**変更内容の詳細** (必要に応じて):
- [変更1の詳細説明]
- [変更2の詳細説明]

---

## 10. 承認

| 役割 | 名前 | 承認日 | サイン | コメント |
|------|------|--------|--------|----------|
| 要件定義者 | [名前] | YYYY-MM-DD | ✓ | |
| レビュアー | [名前] | YYYY-MM-DD | ✓ | |
| 技術責任者 | [名前] | YYYY-MM-DD | ✓ | |
| 最終承認者 | [名前] | YYYY-MM-DD | ✓ | |

---

## 11. 補足資料

### 11.1 参考資料

- [関連ドキュメント名]: [リンク]
- [参考記事名]: [リンク]

### 11.2 関連Issue

- GitHub Issue: #XXX
- Jira Ticket: [チケット番号]

### 11.3 備考

[その他特記事項]

---

**このテンプレートを使用する際の注意**:
1. すべてのセクションを埋める必要はありません。プロジェクトや機能の規模に応じて適宜調整してください。
2. 不要なセクションは削除して構いません。
3. 必要に応じてセクションを追加してください。
4. [  ]はチェックボックスです。該当する項目をチェックしてください。
